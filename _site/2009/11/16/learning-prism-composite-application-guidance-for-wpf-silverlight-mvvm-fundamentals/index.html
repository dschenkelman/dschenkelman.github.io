<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Learning Prism (Composite Application Guidance for WPF & Silverlight) MVVM Fundamentals &#8211; A sea of code</title>
<meta name="description" content="Pseudo-random thoughts related to software development...">
<meta name="keywords" content="MVVM, p&amp;p, Patterns &amp; Practices, Prism-v2, Prism-v2.1, Silverlight, Silverlight 3, Windows Presentation Foundation, WPF">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="/images/site-logo.jpg">
<meta name="twitter:title" content="Learning Prism (Composite Application Guidance for WPF & Silverlight) MVVM Fundamentals">
<meta name="twitter:description" content="Pseudo-random thoughts related to software development...">
<meta name="twitter:creator" content="@dschenkelman">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Learning Prism (Composite Application Guidance for WPF & Silverlight) MVVM Fundamentals">
<meta property="og:description" content="Pseudo-random thoughts related to software development...">
<meta property="og:url" content="/2009/11/16/learning-prism-composite-application-guidance-for-wpf-silverlight-mvvm-fundamentals/">
<meta property="og:site_name" content="A sea of code">





<link rel="canonical" href="/2009/11/16/learning-prism-composite-application-guidance-for-wpf-silverlight-mvvm-fundamentals/">
<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="A sea of code Feed">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.min.css">
<!-- Webfonts -->
<script src="//use.edgefonts.net/source-sans-pro:n2,i2,n3,i3,n4,i4,n6,i6,n7,i7,n9,i9;source-code-pro:n4,n7;volkhov.js"></script>

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/apple-touch-icon-144x144-precomposed.png">j

</head>

<body id="post">

<div class="navigation-wrapper">
	<nav role="navigation" id="site-nav" class="animated drop">
	    <ul>
	        
			<li>
				
					<a href="/">Home</a>
				 
			</li>
	        
			<li>
				
					<a href="/about/">About</a>
				 
			</li>
	        
			<li>
				
					<a href="/articles/">Articles</a>
				 
			</li>
	        
	        <li><a href="/feed.xml" title="Atom/RSS feed"><i class="icon-rss"></i> Feed</a></li>
	        <li class="dosearch"><i class="icon-search"></i> Search</li>
	    </ul>
	</nav>
</div><!-- /.navigation-wrapper -->

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->

<div class="search-wrapper">
	<div class="search-form">
		<input type="text" class="search-field" placeholder="Search...">
		<i class="icon-remove-sign icon-2x"></i>
		<ul class="search-results post-list"></ul><!-- /.search-results -->
	</div><!-- /.search-form -->
</div><!-- ./search-wrapper -->

<header class="masthead">
	<div class="wrap">
        
    		<a href="/" class="site-logo" rel="home" title="A sea of code"><img src="/images/site-logo.jpg" width="200" height="200" alt="A sea of code logo" class="animated fadeInUp"></a>
        
        <h1 class="site-title animated fadeIn"><a href="/">A sea of code</a></h1>
		<h2 class="site-description animated fadeIn" itemprop="description">Pseudo-random thoughts related to software development...</h2>
	</div>
</header><!-- /.masthead -->


<div id="main" role="main">
  <article class="hentry">
    
    <div class="entry-wrapper">
      <header class="entry-header">
        <span class="entry-tags"><a href="/tags/#MVVM" title="Pages tagged MVVM">MVVM</a>&nbsp;&bull;&nbsp;<a href="/tags/#p&amp;p" title="Pages tagged p&amp;p">p&amp;p</a>&nbsp;&bull;&nbsp;<a href="/tags/#Patterns &amp; Practices" title="Pages tagged Patterns &amp; Practices">Patterns &amp; Practices</a>&nbsp;&bull;&nbsp;<a href="/tags/#Prism-v2" title="Pages tagged Prism-v2">Prism-v2</a>&nbsp;&bull;&nbsp;<a href="/tags/#Prism-v2.1" title="Pages tagged Prism-v2.1">Prism-v2.1</a>&nbsp;&bull;&nbsp;<a href="/tags/#Silverlight" title="Pages tagged Silverlight">Silverlight</a>&nbsp;&bull;&nbsp;<a href="/tags/#Silverlight 3" title="Pages tagged Silverlight 3">Silverlight 3</a>&nbsp;&bull;&nbsp;<a href="/tags/#Windows Presentation Foundation" title="Pages tagged Windows Presentation Foundation">Windows Presentation Foundation</a>&nbsp;&bull;&nbsp;<a href="/tags/#WPF" title="Pages tagged WPF">WPF</a></span>
        
          <h1 class="entry-title">Learning Prism (Composite Application Guidance for WPF & Silverlight) MVVM Fundamentals</h1>
        
      </header>
      <footer class="entry-meta">
        <img src="/images/bio-photo.jpg" alt="Damian Schenkelman photo" class="author-photo">
        <span class="author vcard">By <span class="fn"><a href="/about/" title="About Damian Schenkelman">Damian Schenkelman</a></span></span>
        <span class="entry-date date published"><time datetime="2009-11-16T00:00:00-05:00"><i class="icon-calendar-empty"></i> November 16, 2009</time></span>
        
        <span class="entry-comments"><i class="icon-comment-alt"></i> <a href="#disqus_thread">Comment</a></span>
        <span><a href="/2009/11/16/learning-prism-composite-application-guidance-for-wpf-silverlight-mvvm-fundamentals/" rel="bookmark" title="Learning Prism (Composite Application Guidance for WPF & Silverlight) MVVM Fundamentals"><i class="icon-link"></i> Permalink</a></span>
        
      </footer>
      <div class="entry-content">
        <p>On a <a href="http://blogs.southworks.net/dschenkelman/2009/10/22/learning-prism-composite-application-guidance-for-wpf-silverlight-how-do-i-start/" target="_blank">previous post</a> in this series I talked about a possible approach to take when starting to learn Prism as a whole (the Tip numbering is resumed from the previous post). In this post I will get more specific and talk about one of the most used (if not the most used) pattern when developing Prism applications (either for WPF &amp; Silverlight): MVVM.</p>
<p>Most people are familiar with this pattern (if you are not great places to read about it are <a href="http://msdn.microsoft.com/en-us/magazine/dd419663.aspx" target="_blank">here for WPF</a> and <a href="http://msdn.microsoft.com/en-us/magazine/dd458800.aspx" target="_blank">over here for Silverlight</a>), so I will not go deep into what is the main idea of it. Instead I will try to go over some core concepts that usually lead to different levels of confusion.</p>
<h2>What’s the difference between MVVM and PresentationModel?</h2>
<p>The above question is one asked a lot, as people tend to get confused when they hear all the talk about MVVM and then open some Prism <a href="http://msdn.microsoft.com/en-us/library/dd458858.aspx" target="_blank">Quickstarts</a> or <a href="http://msdn.microsoft.com/en-us/library/dd458919.aspx" target="_blank">RI</a> and find most of them <em>“implement the <strong>PresentationModel</strong> pattern”</em>.</p>
<p>Well, there is not a certain answer (and if there was I probably wouldn’t be the one who came up with it), but as far as Prism development is concerned they are synonyms. There is no difference between them, except for the coined term. As <a href="http://martinfowler.com/" target="_blank">Martin Fowler</a> explains in his <a href="http://martinfowler.com/eaaDev/PresentationModel.html" target="_blank">PresentationModel article</a>: <em>“The essence of a Presentation Model is of a fully self-contained class that represents all the data and behavior of the UI window, but without any of the controls used to render that UI on the screen. A view then simply projects the state of the presentation model onto the glass.”</em>, so if you think about it, the way to “project the state of the PresentationModel (or ViewModel) onto the glass is <strong>WPF/Silverlight</strong> DataBinding in our case (or as <a href="http://blogs.southworks.net/jdominguez/" target="_blank">Julian</a> likes to explain it: <em>“the ViewModel is a bindable Presenter”</em>).</p>
<p>Always remember the main objective, testability and decoupling.</p>
<table border="1" cellspacing="0" cellpadding="2" width="292" align="center">
<tbody>
<tr>
<td width="290" valign="top"><strong>Tip 5:</strong> MVVM and Presentation Model are synonyms.</td>
</tr>
</tbody>
</table>
<h2>How do I do pure MVVM?</h2>
<p>This is another point of confusion as people tend to relate MVVM with <a href="http://msdn.microsoft.com/en-us/library/ms742521.aspx" target="_blank">DataTemplates</a> and no View code behind, so they get the idea that the only way to implement the pattern is that one.</p>
<p>In my opinion there is no pure MVVM, it is a design pattern, so it can have many different implementations which will depend mainly on who implements it and what his requirements are. In this particular topic I would like to “branch you” to <a href="http://blogs.msdn.com/gblock/" target="_blank">Glenn’s</a> post “<a href="http://blogs.msdn.com/gblock/archive/2009/08/03/the-spirit-of-mvvm-viewmodel-it-s-not-a-code-counting-exercise.aspx" target="_blank">The spirit of MVVM (ViewModel), it’s not a code counting exercise.</a>” as I agree with his point of view in this topic, so there is no point in duplicating the information.</p>
<p>Now that you have finished reading Glenn’s post, I hope you understand what I am trying to explain (not necessarily agree). I for once like the “View First” (you “talk” to the view) implementation to relate the View to its <strong>ViewModel</strong> in Prism could be the following (using DI):</p>
<p><span style="color: blue">public class </span><span style="color: #2b91af">MyView</span><br />
{<br />
<span style="color: blue">public </span>MyView(<span style="color: #2b91af">IMyViewModel </span>viewModel)<br />
{<br />
<span style="color: blue">this</span>.DataContext = viewModel;<br />
InitializeComponent();<br />
}<br />
}</p>
<p>In the code above, Unity’s DI provides the decoupling between the View and the ViewModel, so the ViewModel “does not have to know anything about the view” and allows you to test the VM in isolation (of course this is just one of the ways to do it).</p>
<table border="1" cellspacing="0" cellpadding="2" width="457" align="center">
<tbody>
<tr>
<td width="455" valign="top"><strong>Tip 6: </strong>There is no Silver Bullet MVVM implementation. Use the one that you like best.</td>
</tr>
</tbody>
</table>
<h2>How should I manage my View/ViewModel?</h2>
<p>This question addresses both creation/destruction of View and ViewModels as well as its interaction with other components in the application. Often it is not “clear” which component should handle a specific action.</p>
<p>Say that when a button is clicked an event should be published. Where should this be done? Well, without information about the application and its patterns it is hard to say. It could be done in the <strong>ViewModel</strong> or it could be done in a module level controller that manages interaction with other modules, but this depends on how your application is structured.</p>
<p>Instead of expanding on this topic, I would like to branch you (yet again), to these posts from Ward Bell which talk about these common questions and provide some really interesting and thought answers:</p>
<ul>
<li><a href="http://neverindoubtnet.blogspot.com/2009/05/birth-and-death-of-m-v-vm-triads.html">Birth and Death of M-V-VM Triads</a></li>
<li><a href="http://neverindoubtnet.blogspot.com/2009/06/screen-factory.html">Screen Factory</a></li>
</ul>
<h2>Should I always use commands to communicate with the ViewModel?</h2>
<p>Before using a command, I usually stop and think: “Can this be done in another way?, Can I achieve this same functionality with binding?”. Well, sometimes the answer is yes, and that is when I think commands are not necessary. The most common example is binding a command to execute every time and item in a Listbox is selected. This same behavior can be achieved by binding the SelectedItem property of the Listbox to your ViewModel (most of the times), and executing the required action on the setter.</p>
<p>Having thought of the above, what if I do need a command? Well, my first recommendation would be understanding how do Commands with attached Behaviors work, a topic explained by <a href="http://blogs.southworks.net/jdominguez/" target="_blank">Julian</a> in this <a href="http://blogs.southworks.net/jdominguez/2008/08/icommand-for-silverlight-with-attached-behaviors/" target="_blank">great post</a>. After that you can use the <a href="http://blogs.southworks.net/dschenkelman/2009/08/13/c-code-snippet-to-create-commands-with-attached-behaviors-using-prism/" target="_blank">code snippet I created</a> some time ago to help you with the tedious task of creating the classes required for this to work.</p>
<table border="1" cellspacing="0" cellpadding="2" width="400" align="center">
<tbody>
<tr>
<td width="400" valign="top"><strong>Tip 7: </strong>Before using commands, think if there is another option.</td>
</tr>
</tbody>
</table>
<h3>Things to add to your reading list</h3>
<p>To help you comply with Tip 4, you can find below a couple of articles about MVVM and MVVM with Prism that I think might be of use to better understand this topic (the ones mentioned above would be in this list, but there is not need in duplicating them):</p>
<ul>
<li><a href="http://blogs.msdn.com/erwinvandervalk/archive/2009/08/12/how-do-i-do-with-the-model-view-viewmodel-pattern.aspx" target="_blank">Erwin’s MVVM series</a> (with some more posts to go)</li>
<li><a href="http://blogs.msdn.com/dphill/archive/2009/06/15/prism-quick-start-kit-update.aspx" target="_blank">David’s Visual Studio templates</a></li>
</ul>
<p>Hopefully, this post has helped you understand a little more about MVVM and how to use it with Prism. As always, your feedback is appreciated, so if you believe any link should be added or anything of the sort, just drop a comment.</p>

        <div id="disqus_thread"></div><!-- /#disqus_thread -->
      </div><!-- /.entry-content -->
    </div><!-- /.entry-wrapper -->
    <nav class="pagination" role="navigation">
      
        <a href="/2009/11/09/prism-2-composite-application-guidance-for-wpf-silverlight-migrated-to-visual-studio-2010-beta-2/" class="btn" title="Prism 2 (Composite Application Guidance for WPF & Silverlight) migrated to Visual Studio 2010 Beta 2">Previous article</a>
      
      
        <a href="/2009/11/20/prism-2-composite-application-guidance-for-wpf-silverlightmigrated-to-silverlight-4-beta/" class="btn" title="Prism 2 (Composite Application Guidance for WPF & Silverlight) migrated to Silverlight 4 Beta">Next article</a>
      
    </nav><!-- /.pagination -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2014 Damian Schenkelman. Powered by <a href="http://jekyllrb.com">Jekyll</a> using the <a href="http://mademistakes.com/so-simple/">So Simple Theme</a>.</span>
<div class="social-icons">
	<a href="http://twitter.com/dschenkelman" title="Damian Schenkelman on Twitter" target="_blank"><i class="icon-twitter icon-2x"></i></a>
	
	
	<a href="http://linkedin.com/in/damianschenkelman" title="Damian Schenkelman on LinkedIn" target="_blank"><i class="icon-linkedin icon-2x"></i></a>
	
	
	
	<a href="http://github.com/dschenkelman" title="Damian Schenkelman on Github" target="_blank"><i class="icon-github icon-2x"></i></a>
	
</div><!-- /.social-icons -->
  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="/assets/js/scripts.min.js"></script>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/gist-embed/1.7/gist-embed.min.js"></script>


<!-- Jekyll Simple Search option -->
<script>
  $(document).ready(function() {
      $('.search-field').simpleJekyllSearch({
          jsonFile : '/search.json',
          searchResults : '.search-results',
          template : '<li><article><a href="{url}">{title} <span class="entry-date"><time datetime="{date}">{shortdate}</time></span></a></article></li>',
          noResults: '<p>Nothing found.</p>'
        });
  });

  (function( $, window, undefined ) {

     var bs = {
          close: $(".icon-remove-sign"),
          searchform: $(".search-form"),
          canvas: $("body"),
          dothis: $('.dosearch')
      };

    bs.dothis.on('click', function() {
      $('.search-wrapper').css({ display: "block" });
      bs.searchform.toggleClass('active');
      bs.searchform.find('input').focus();
      bs.canvas.toggleClass('search-overlay');
    });

      bs.close.on('click', function() {
        $('.search-wrapper').removeAttr( 'style' );
        bs.searchform.toggleClass('active');
        bs.canvas.removeClass('search-overlay');
    });
  })( jQuery, window );
</script>


<!-- Asynchronous Google Analytics snippet -->
<script>
  var _gaq = _gaq || [];
  var pluginUrl =
 '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
  _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
  _gaq.push(['_setAccount', 'UA-50875301-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'dschenkelman'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
	        

</body>
</html>
