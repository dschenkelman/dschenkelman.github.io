<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>scriptcs: Acceptance tests with XBehave.net &#8211; A sea of code</title>
<meta name="description" content="Pseudo-random thoughts related to software development...">
<meta name="keywords" content="scriptcs">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://localhost:4000/images/site-logo.jpg">
<meta name="twitter:title" content="scriptcs: Acceptance tests with XBehave.net">
<meta name="twitter:description" content="Pseudo-random thoughts related to software development...">
<meta name="twitter:creator" content="@dschenkelman">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="scriptcs: Acceptance tests with XBehave.net">
<meta property="og:description" content="Pseudo-random thoughts related to software development...">
<meta property="og:url" content="http://localhost:4000/2013/12/25/scriptcs-acceptance-tests-with-xbehave-net/">
<meta property="og:site_name" content="A sea of code">





<link rel="canonical" href="http://localhost:4000/2013/12/25/scriptcs-acceptance-tests-with-xbehave-net/">
<link href="http://localhost:4000/feed.xml" type="application/atom+xml" rel="alternate" title="A sea of code Feed">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://localhost:4000/assets/css/main.min.css">
<!-- Webfonts -->
<script src="//use.edgefonts.net/source-sans-pro:n2,i2,n3,i3,n4,i4,n6,i6,n7,i7,n9,i9;source-code-pro:n4,n7;volkhov.js"></script>

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="http://localhost:4000/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://localhost:4000/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://localhost:4000/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://localhost:4000/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://localhost:4000/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://localhost:4000/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://localhost:4000/images/apple-touch-icon-144x144-precomposed.png">

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/gist-embed/1.7/gist-embed.min.js"></script>

</head>

<body id="post">

<div class="navigation-wrapper">
	<nav role="navigation" id="site-nav" class="animated drop">
	    <ul>
	        
			<li>
				
					<a href="http://localhost:4000/">Home</a>
				 
			</li>
	        
			<li>
				
					<a href="http://localhost:4000/about/">About</a>
				 
			</li>
	        
			<li>
				
					<a href="/articles/">Articles</a>
				 
			</li>
	        
	        <li><a href="http://localhost:4000/feed.xml" title="Atom/RSS feed"><i class="icon-rss"></i> Feed</a></li>
	        <li class="dosearch"><i class="icon-search"></i> Search</li>
	    </ul>
	</nav>
</div><!-- /.navigation-wrapper -->

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->

<div class="search-wrapper">
	<div class="search-form">
		<input type="text" class="search-field" placeholder="Search...">
		<i class="icon-remove-sign icon-2x"></i>
		<ul class="search-results post-list"></ul><!-- /.search-results -->
	</div><!-- /.search-form -->
</div><!-- ./search-wrapper -->

<header class="masthead">
	<div class="wrap">
        
    		<a href="http://localhost:4000/" class="site-logo" rel="home" title="A sea of code"><img src="http://localhost:4000/images/site-logo.jpg" width="200" height="200" alt="A sea of code logo" class="animated fadeInUp"></a>
        
        <h1 class="site-title animated fadeIn"><a href="http://localhost:4000/">A sea of code</a></h1>
		<h2 class="site-description animated fadeIn" itemprop="description">Pseudo-random thoughts related to software development...</h2>
	</div>
</header><!-- /.masthead -->


<div id="main" role="main">
  <article class="hentry">
    
    <div class="entry-wrapper">
      <header class="entry-header">
        <span class="entry-tags"><a href="http://localhost:4000/tags/#scriptcs" title="Pages tagged scriptcs">scriptcs</a></span>
        
          <h1 class="entry-title">scriptcs: Acceptance tests with XBehave.net</h1>
        
      </header>
      <footer class="entry-meta">
        <img src="http://localhost:4000/images/bio-photo.jpg" alt="Damian Schenkelman photo" class="author-photo">
        <span class="author vcard">By <span class="fn"><a href="http://localhost:4000/about/" title="About Damian Schenkelman">Damian Schenkelman</a></span></span>
        <span class="entry-date date published"><time datetime="2013-12-25T00:00:00-05:00"><i class="icon-calendar-empty"></i> December 25, 2013</time></span>
        
        
        <span><a href="http://localhost:4000/2013/12/25/scriptcs-acceptance-tests-with-xbehave-net/" rel="bookmark" title="scriptcs: Acceptance tests with XBehave.net"><i class="icon-link"></i> Permalink</a></span>
        
      </footer>
      <div class="entry-content">
        <p>One of the challenges we face when merging pull requests in <a href="https://github.com/scriptcs/scriptcs">scriptcs</a> is making sure all features are still working. Executing our unit tests for every pull request definitely helps as it helps catch many mistakes, but some others go unnoticed due to integration issues (different components, the file server, assembly versions).</p>
<p>Fortunately, scriptcs is something that can be easily tested as it does not have any external dependencies (other than <a href="http://www.nuget.org/">NuGet</a>) such as databases, web services, etc. That's why we decided to create some <a href="https://github.com/scriptcs/scriptcs/issues/428">acceptance tests</a>.</p>
<h2>An initial approach</h2>
<p>Running <span style="font-family: Consolas">scriptcs –install </span>takes a packages.config in the current working directory and installs all the packages specified in it. The first attempt at testing this was the following one:</p>
<code data-gist-id="8124109" data-gist-file="InitialTest.cs"></code>
<p>The above sample uses <a href="http://xunit.codeplex.com/">XUnit</a>, takes advantage of the Dispose method to do cleanup and verifies that the correct packages are installed. Nevertheless, we can take this for another spin to see if we can get a test that is even easier to read.</p>
<h2>Enter XBehave</h2>
<p align="left">After making the above sample available through Twitter for feedback <a href="https://twitter.com/gblock">@glennblock</a> brought <a href="http://xbehave.github.io/">XBehave</a> into the table, which is being used in his (and other's) <a href="http://chimera.labs.oreilly.com/books/1234000001708/ch08.html#_feature_retrieving_issues">Web API book</a>:</p>
<blockquote class="twitter-tweet" lang="en"><p><a href="https://twitter.com/dschenkelman">@dschenkelman</a> <a href="https://twitter.com/scriptcsnet">@scriptcsnet</a> have you seen XBehave?</p>
<p>— Glenn Block (@gblock) <a href="https://twitter.com/gblock/statuses/415629455218835457">December 24, 2013</a></p></blockquote>
<p>From its <a href="https://github.com/xbehave/xbehave.net">GitHub site</a> XBehave is<em> A BDD/TDD framework based on xUnit .net and inspired by Gherkin.</em> The goal of this blog post is not to explain how to use XBehave, but if you are interested <a href="http://xbehave.github.io/">this site</a> has a quickstart page and some useful docs to get you started with it.</p>
<p>The nice thing about it, is that you can write a spec using plain text and then map that to actual code. For example, the spec for this feature could be something like this:</p>
<blockquote><p><strong>Given</strong> a current working directory<br />
And a packages.config file located in the current directory<br />
<strong>   When</strong> the packages are installed<br />
<strong>       Then</strong> the program executes successfully<br />
And a packages directory is created inside the working directory<br />
And a directory for the package and each of its dependencies is created</p></blockquote>
<p>The resulting test case is the following one:</p>
<code data-gist-id="8124109" data-gist-file="XBehaveTest.cs"></code>
<h2>Benefits</h2>
<p>The things I like better about the XBehave test are:</p>
<ol>
<li>The Teardown method is closer to the code that creates the items that must be cleaned up.</li>
<li>Each line of code is placed within the related spec string. Before they could be anywhere, but having the strings in there helped me realized where it made better sense to put them.</li>
<li>The scenario under test is easier to understand for everyone reading the test.</li>
</ol>

        
      </div><!-- /.entry-content -->
    </div><!-- /.entry-wrapper -->
    <nav class="pagination" role="navigation">
      
        <a href="http://localhost:4000/2013/12/04/scriptcs-reducing-startup-time-by-caching-compiled-dlls/" class="btn" title="scriptcs: Reducing startup time by caching compiled .dlls">Previous article</a>
      
      
        <a href="http://localhost:4000/2014/01/07/spanish-desarrollo-multi-plataforma-con-visual-studio-2013-e-introduccin-a-xamarin-en-espaol/" class="btn" title="[Spanish] Desarrollo multi-plataforma con Visual Studio 2013 e introducción a Xamarin (en español)">Next article</a>
      
    </nav><!-- /.pagination -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2014 Damian Schenkelman. Powered by <a href="http://jekyllrb.com">Jekyll</a> using the <a href="http://mademistakes.com/so-simple/">So Simple Theme</a>.</span>
<div class="social-icons">
	<a href="http://twitter.com/dschenkelman" title="Damian Schenkelman on Twitter" target="_blank"><i class="icon-twitter icon-2x"></i></a>
	
	
	<a href="http://linkedin.com/in/damianschenkelman" title="Damian Schenkelman on LinkedIn" target="_blank"><i class="icon-linkedin icon-2x"></i></a>
	
	
	
	<a href="http://github.com/dschenkelman" title="Damian Schenkelman on Github" target="_blank"><i class="icon-github icon-2x"></i></a>
	
</div><!-- /.social-icons -->
  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://localhost:4000/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://localhost:4000/assets/js/scripts.min.js"></script>

<!-- Jekyll Simple Search option -->
<script>
  $(document).ready(function() {
      $('.search-field').simpleJekyllSearch({
          jsonFile : 'http://localhost:4000/search.json',
          searchResults : '.search-results',
          template : '<li><article><a href="{url}">{title} <span class="entry-date"><time datetime="{date}">{shortdate}</time></span></a></article></li>',
          noResults: '<p>Nothing found.</p>'
        });
  });

  (function( $, window, undefined ) {
    
     var bs = {
          close: $(".icon-remove-sign"),
          searchform: $(".search-form"),
          canvas: $("body"),
          dothis: $('.dosearch')
      };
    
    bs.dothis.on('click', function() {
      $('.search-wrapper').css({ display: "block" });
      bs.searchform.toggleClass('active');
      bs.searchform.find('input').focus();
      bs.canvas.toggleClass('search-overlay');
    });
    
      bs.close.on('click', function() {
        $('.search-wrapper').removeAttr( 'style' );
        bs.searchform.toggleClass('active');
        bs.canvas.removeClass('search-overlay');
    });
  })( jQuery, window );
</script>


	        

</body>
</html>
